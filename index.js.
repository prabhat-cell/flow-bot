const venom = require('venom-bot');
const express = require('express');
const app = express();

app.use(express.json());

venom.create().then((client) => start(client));

function start(client) {
  app.post('/send', async (req, res) => {
    const { to, message } = req.body;
    try {
      await client.sendText(to, message);
      res.send({ status: 'Message sent!' });
    } catch (e) {
      res.status(500).send({ error: e.message });
    }
  });
}

app.listen(3000, () => console.log('Bot running on port 3000'));
